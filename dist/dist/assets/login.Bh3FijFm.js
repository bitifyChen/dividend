import{u as g,g as h,h as d,r as _,o as w,a as y,i as p,b as U,w as V,j as I,F as x,f as m,k as f,E as M}from"./index.DPB8tK3_.js";import{a as N}from"./axios.B4uVmeYG.js";import"./__commonjsHelpers__.Cpj98o6Y.js";const C="AIzaSyD0UJfhTh_0FMMImukpctcIEnfOyo7IDXM",E="1XU70vqHL1cDLFU3NBhGSJUYrRNM7lgqKpgU3sUvask4",v=N.create({withCredentials:!1,timeout:1e4});v.interceptors.response.use(t=>{var n;const u=o=>{const r=o[0];return o.slice(1).map(s=>r.reduce((l,a,e)=>(l[a]=s[e]!==void 0?s[e]:null,l),{}))};if((t==null?void 0:t.status)===200)return u((n=t==null?void 0:t.data)==null?void 0:n.values)});const B=async(t,u,n,o)=>{try{return await v({method:t,url:`https://sheets.googleapis.com/v4/spreadsheets/${E}/values/${u}?key=${C}`,data:n,params:o})}catch(r){throw r}},F=()=>B("get","user"),b={__name:"login",setup(t){const u=g(),n=h(),o=d([]),r=()=>{F().then(a=>{o.value=a})},s=d({username:"",password:""}),l=async()=>{o.value.length===0&&await r();const a=o.value.find(e=>e.username===s.value.username&&e.password===s.value.password);a?(n.set("token",a.token),f("登入成功","success"),u.push({name:"IndexPage"})):f("帳密錯誤")};return(a,e)=>{const i=M,k=_("router-link");return w(),y(x,null,[p(i,{type:"text",modelValue:s.value.username,"onUpdate:modelValue":e[0]||(e[0]=c=>s.value.username=c)},null,8,["modelValue"]),p(i,{type:"password",modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=c=>s.value.password=c)},null,8,["modelValue"]),U("button",{onClick:l},"登入"),p(k,{to:"/register"},{default:V(()=>[I("註冊")]),_:1})],64)}}};typeof m=="function"&&m(b);export{b as default};
//# sourceMappingURL=login.Bh3FijFm.js.map
